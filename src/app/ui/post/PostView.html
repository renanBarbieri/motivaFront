<div class="pageContent" fxLayout="row">
  <div class="leftSideBar" fxLayout="column" fxFlex="16%">
    <app-left-sidebar
      [username]="postViewModel.username"
      [levelCompleted]="postViewModel.levelCompleted"
      [levelName]="postViewModel.levelName"
      [profileImage]="postViewModel.profileImage"
      [rewards]="postViewModel.rewards"
      (onProfileClick)="openProfilePage()"
      (onFavoritesClick)="openFavoritesPage()"
      (onSettingsClick)="openSettingsPage()"
      (onLogoutClick)="logout()"
    >
    </app-left-sidebar>
  </div>
  <div class="pageCenter" fxLayout="column" fxFlex="84%">
    <app-toolbar
      [toolbarState]="postToolbarState"
      (homeClickEvent)="openHomePage()"
      (searchClickEvent)="openSearchPage()"
      (newPostClickEvent)="openNewPostPage()"></app-toolbar>
    <div class="content">
      <div ng2FileDrop
           [ngClass]="{'nv-file-over': postViewModel.hasBaseDropZoneOver }"
           [uploader]="uploader"
           (fileOver)="fileOverBase($event)"
           class="well drop-zone">
        <div class="drop-zone-empty {{ !postViewModel.filePreviewPath ? 'cVisible' : 'cGone'}}">
          <input id="fileToUpload" type="file" ng2FileSelect [uploader]="uploader" style="display:none;">
          <mat-icon class="drop-icon">panorama</mat-icon>
          <span class="drop-text">Esta é a capa do seu post</span>
          <span class="drop-subtext">Arraste um arquivo aqui ou clique no botão</span>
        </div>
        <div class="drop-zone-frame" *ngIf="postViewModel.filePreviewPath">
          <img [src]="postViewModel.filePreviewPath" class="drop-zone-image"/>
        </div>
        <div class="fabColumn">
          <button mat-fab
                  class="fabUpload"
                  onclick="document.getElementById('fileToUpload').click()"
                  matTooltip="Adicionar capa">
            <mat-icon>file_upload</mat-icon>
          </button>
        </div>
      </div>
      <div class="postTitleBox">
        <input matInput class="postTitle" id="postTitleInput" (change)="onTitleChanged($event)"
               placeholder="Insira um título pra seu post" />
      </div>
      <quill-editor [options]="editorOptions"
                    (ready)="onEditorCreated($event)"
                    (change)="onContentChanged($event)">
      </quill-editor>
      <div class="postActions">
        <button class="saveButton" mat-raised-button color="primary" (click)="savePost()">Postar</button>
      </div>
    </div>
  </div>
</div>
